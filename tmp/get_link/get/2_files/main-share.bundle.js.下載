!function(){return function e(t,n,a){function r(i,l){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){return r(t[i][1][e]||e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}}()({1:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.__esModule=!0;var o=r(e("./handlebars/base")),i=a(e("./handlebars/safe-string")),l=a(e("./handlebars/exception")),s=r(e("./handlebars/utils")),u=r(e("./handlebars/runtime")),c=a(e("./handlebars/no-conflict"));function d(){var e=new o.HandlebarsEnvironment;return s.extend(e,o),e.SafeString=i.default,e.Exception=l.default,e.Utils=s,e.escapeExpression=s.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var f=d();f.create=d,c.default(f),f.default=f,n.default=f,t.exports=n.default},{"./handlebars/base":2,"./handlebars/exception":5,"./handlebars/no-conflict":15,"./handlebars/runtime":16,"./handlebars/safe-string":17,"./handlebars/utils":18}],2:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.HandlebarsEnvironment=u;var r=e("./utils"),o=a(e("./exception")),i=e("./helpers"),l=e("./decorators"),s=a(e("./logger"));n.VERSION="4.0.14";n.COMPILER_REVISION=7;n.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function u(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},i.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:s.default,log:s.default.log,registerHelper:function(e,t){if("[object Object]"===r.toString.call(e)){if(t)throw new o.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===r.toString.call(e))r.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===r.toString.call(e)){if(t)throw new o.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var c=s.default.log;n.log=c,n.createFrame=r.createFrame,n.logger=s.default},{"./decorators":3,"./exception":5,"./helpers":6,"./logger":14,"./utils":18}],3:[function(e,t,n){"use strict";n.__esModule=!0,n.registerDefaultDecorators=function(e){o.default(e)};var a,r=e("./decorators/inline"),o=(a=r)&&a.__esModule?a:{default:a}},{"./decorators/inline":4}],4:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../utils");n.default=function(e){e.registerDecorator("inline",function(e,t,n,r){var o=e;return t.partials||(t.partials={},o=function(r,o){var i=n.partials;n.partials=a.extend({},i,t.partials);var l=e(r,o);return n.partials=i,l}),t.partials[r.args[0]]=r.fn,o})},t.exports=n.default},{"../utils":18}],5:[function(e,t,n){"use strict";n.__esModule=!0;var a=["description","fileName","lineNumber","message","name","number","stack"];function r(e,t){var n=t&&t.loc,o=void 0,i=void 0;n&&(e+=" - "+(o=n.start.line)+":"+(i=n.start.column));for(var l=Error.prototype.constructor.call(this,e),s=0;s<a.length;s++)this[a[s]]=l[a[s]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{n&&(this.lineNumber=o,Object.defineProperty?Object.defineProperty(this,"column",{value:i,enumerable:!0}):this.column=i)}catch(e){}}r.prototype=new Error,n.default=r,t.exports=n.default},{}],6:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0,n.registerDefaultHelpers=function(e){r.default(e),o.default(e),i.default(e),l.default(e),s.default(e),u.default(e),c.default(e)};var r=a(e("./helpers/block-helper-missing")),o=a(e("./helpers/each")),i=a(e("./helpers/helper-missing")),l=a(e("./helpers/if")),s=a(e("./helpers/log")),u=a(e("./helpers/lookup")),c=a(e("./helpers/with"))},{"./helpers/block-helper-missing":7,"./helpers/each":8,"./helpers/helper-missing":9,"./helpers/if":10,"./helpers/log":11,"./helpers/lookup":12,"./helpers/with":13}],7:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../utils");n.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return r(this);if(a.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var i=a.createFrame(n.data);i.contextPath=a.appendContextPath(n.data.contextPath,n.name),n={data:i}}return o(t,n)})},t.exports=n.default},{"../utils":18}],8:[function(e,t,n){"use strict";n.__esModule=!0;var a,r=e("../utils"),o=e("../exception"),i=(a=o)&&a.__esModule?a:{default:a};n.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new i.default("Must pass iterator to #each");var n=t.fn,a=t.inverse,o=0,l="",s=void 0,u=void 0;function c(t,a,o){s&&(s.key=t,s.index=a,s.first=0===a,s.last=!!o,u&&(s.contextPath=u+t)),l+=n(e[t],{data:s,blockParams:r.blockParams([e[t],t],[u+t,null])})}if(t.data&&t.ids&&(u=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(s=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;o<d;o++)o in e&&c(o,o,o===e.length-1);else{var f=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==f&&c(f,o-1),f=p,o++);void 0!==f&&c(f,o-1,!0)}return 0===o&&(l=a(this)),l})},t.exports=n.default},{"../exception":5,"../utils":18}],9:[function(e,t,n){"use strict";n.__esModule=!0;var a,r=e("../exception"),o=(a=r)&&a.__esModule?a:{default:a};n.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=n.default},{"../exception":5}],10:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../utils");n.default=function(e){e.registerHelper("if",function(e,t){return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=n.default},{"../utils":18}],11:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)t.push(arguments[a]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},t.exports=n.default},{}],12:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e){e.registerHelper("lookup",function(e,t){return e?"constructor"!==t||e.propertyIsEnumerable(t)?e[t]:void 0:e})},t.exports=n.default},{}],13:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("../utils");n.default=function(e){e.registerHelper("with",function(e,t){a.isFunction(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:a.blockParams([e],[r&&r.contextPath])})})},t.exports=n.default},{"../utils":18}],14:[function(e,t,n){"use strict";n.__esModule=!0;var a=e("./utils"),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=a.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];console[t].apply(console,a)}}};n.default=r,t.exports=n.default},{"./utils":18}],15:[function(e,t,n){(function(e){"use strict";n.__esModule=!0,n.default=function(t){var n=void 0!==e?e:window,a=n.Handlebars;t.noConflict=function(){return n.Handlebars===t&&(n.Handlebars=a),t}},t.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){"use strict";n.__esModule=!0,n.checkRevision=function(e){var t=e&&e[0]||1,n=l.COMPILER_REVISION;if(t!==n){if(t<n){var a=l.REVISION_CHANGES[n],r=l.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+r+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},n.template=function(e,t){if(!t)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new i.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,a=0;a<n;a++)if(e[a]&&null!=e[a][t])return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:r.escapeExpression,invokePartial:function(n,a,o){o.hash&&(a=r.extend({},a,o.hash),o.ids&&(o.ids[0]=!0));n=t.VM.resolvePartial.call(this,n,a,o);var l=t.VM.invokePartial.call(this,n,a,o);null==l&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),l=o.partials[o.name](a,o));if(null!=l){if(o.indent){for(var s=l.split("\n"),u=0,c=s.length;u<c&&(s[u]||u+1!==c);u++)s[u]=o.indent+s[u];l=s.join("\n")}return l}throw new i.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,a,r){var o=this.programs[e],i=this.fn(e);return t||r||a||n?o=s(this,e,i,t,n,a,r):o||(o=this.programs[e]=s(this,e,i)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=r.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function a(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=r.data;a._setup(r),!r.partial&&e.useData&&(o=function(e,t){t&&"root"in t||((t=t?l.createFrame(t):{}).root=e);return t}(t,o));var i=void 0,s=e.useBlockParams?[]:void 0;function u(t){return""+e.main(n,t,n.helpers,n.partials,o,s,i)}return e.useDepths&&(i=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(u=c(e.main,u,n,r.depths||[],o,s))(t,r)}return a.isTop=!0,a._setup=function(a){a.partial?(n.helpers=a.helpers,n.partials=a.partials,n.decorators=a.decorators):(n.helpers=n.merge(a.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(a.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(a.decorators,t.decorators)))},a._child=function(t,a,r,o){if(e.useBlockParams&&!r)throw new i.default("must pass block params");if(e.useDepths&&!o)throw new i.default("must pass parent depths");return s(n,t,e[t],a,0,r,o)},a},n.wrapProgram=s,n.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},n.invokePartial=function(e,t,n){var a=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;n.fn&&n.fn!==u&&function(){n.data=l.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=l.createFrame(n.data),n.data["partial-block"]=a,e(t,n)},e.partials&&(n.partials=r.extend({},n.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new i.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},n.noop=u;var a,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils")),o=e("./exception"),i=(a=o)&&a.__esModule?a:{default:a},l=e("./base");function s(e,t,n,a,r,o,i){function l(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=i;return!i||t==i[0]||t===e.nullContext&&null===i[0]||(l=[t].concat(i)),n(e,t,e.helpers,e.partials,r.data||a,o&&[r.blockParams].concat(o),l)}return(l=c(n,l,e,i,a,o)).program=t,l.depth=i?i.length:0,l.blockParams=r||0,l}function u(){return""}function c(e,t,n,a,o,i){if(e.decorator){var l={};t=e.decorator(t,l,n,a&&a[0],o,i,a),r.extend(t,l)}return t}},{"./base":2,"./exception":5,"./utils":18}],17:[function(e,t,n){"use strict";function a(e){this.string=e}n.__esModule=!0,a.prototype.toString=a.prototype.toHTML=function(){return""+this.string},n.default=a,t.exports=n.default},{}],18:[function(e,t,n){"use strict";n.__esModule=!0,n.extend=l,n.indexOf=function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},n.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!o.test(e))return e;return e.replace(r,i)},n.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},n.createFrame=function(e){var t=l({},e);return t._parent=e,t},n.blockParams=function(e,t){return e.path=t,e},n.appendContextPath=function(e,t){return(e?e+".":"")+t};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,o=/[&<>"'`=]/;function i(e){return a[e]}function l(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var s=Object.prototype.toString;n.toString=s;var u=function(e){return"function"==typeof e};u(/x/)&&(n.isFunction=u=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),n.isFunction=u;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};n.isArray=c},{}],19:[function(e,t,n){t.exports=e("./dist/cjs/handlebars.runtime").default},{"./dist/cjs/handlebars.runtime":1}],20:[function(e,t,n){t.exports=e("handlebars/runtime").default},{"handlebars/runtime":19}],21:[function(e,t,n){var a=Backbone.Model.extend({}),r=Backbone.View.extend({initialize:function(){},el:".new-quote",events:{click:"checkLogin"},checkLogin:function(e){var t=this,n=$(e.target).attr("data-id");event.preventDefault(),$.ajax({url:STORE_URL+"cart/login",dataType:"json",xhrFields:{withCredentials:!0}}).done(function(e){"error_login"==e.status?$.alertModal("警告","請先登入",'<a href="'+e.url+'" class="btn btnpink">登入</a>'):t.openModal(n)})},openModal:function(e){this.model.set("mid",e)},render:function(){return this}}),o=Backbone.View.extend({initialize:function(){this.model.on("change",this.render,this)},el:".new-quote-modal",events:{"hide.bs.modal":"clear","click .add_quote":"addQuote","click .upload-text":"textAction","click .upload-image":"imageAction"},clear:function(){this.model.clear()},textAction:function(e){e.preventDefault(),$(".text-quote").css("display","block"),$(".image-quote").css("display","none"),$(".add_quote").attr("data-type","text")},imageAction:function(e){e.preventDefault(),$(".text-quote").css("display","none"),$(".image-quote").css("display","block"),$(".add_quote").attr("data-type","image")},addQuote:function(){var e,t,n=this,a=this.model.get("mid"),r=$(".add_quote").attr("data-type");if("text"==r)t=(t=this.$el.find(".quote_content").val()).replace(/\r\n|\n/g,""),e=$.ajax({url:SOCIAL_URL+"book/quote/"+a,dataType:"json",data:{quote:t,type:r},type:"POST",xhrFields:{withCredentials:!0}});else{t=$("#img_quote")[0].files[0];var o=new FormData(void 0);o.append("type",r),o.append("quote_img",t),e=$.ajax({url:SOCIAL_URL+"book/quote/"+a,dataType:"json",data:o,type:"POST",processData:!1,contentType:!1,xhrFields:{withCredentials:!0}})}e.done(function(e){"error_login"==e.status?$.alertModal("警告","請先登入",'<a href="'+e.url+'" class="btn btngreen">登入</a>'):"ok"==e.status?(n.$el.modal("hide"),$(".quote_num").html(e.num),$.pjax({container:"#chalkboard",fragment:"#chalkboard",url:window.location.toString(),timeout:3e3})):(n.$el.modal("hide"),$.alertModal("警告",e.desc,'<button class="btn btngreen" data-dismiss="modal">確定</button>'))})},templates:e("./templates/new-quote-modal.hbs"),render:function(){if(this.model.get("mid")){var e=this.templates(this.model.attritubes);this.$el.empty().append(e),this.$el.modal(),$(".image-quote").css("display","none")}return this}}),i={init:function(){console.log("newquote init");var e=new a;new r({model:e}),new o({model:e})}};t.exports=i},{"./templates/new-quote-modal.hbs":24}],22:[function(e,t,n){pageSpinner={$el:null,show:function(){this.reset(),this.$el.fadeIn()},hide:function(){this.$el.fadeOut()},reset:function(){this.$el.removeClass("done").removeClass("fail")},done:function(){var e=this;this.$el.addClass("done"),setTimeout(function(){e.hide()},300)},fail:function(){var e=this;this.$el.addClass("fail"),setTimeout(function(){e.hide()},300)},init:function(){var e=$("<div>").addClass("page-spinner");this.$el=e,$("body").append(e)}},t.exports=pageSpinner},{}],23:[function(e,t,n){var a={check:function(e,t,n){var a=this;e?/chrome/.test(navigator.userAgent.toLowerCase())?setTimeout(function(){a._is_popup_blocked(a,e,t,n)},200):e.onload=function(){a._is_popup_blocked(a,e,t,n)}:a._displayError(t,n)},_is_popup_blocked:function(e,t,n,a){t.innerHeight>0==!1&&e._displayError(n,a)},_displayError:function(e,t){$.alertModal("開始閱讀《"+t+"》",'<div class="blocked-window"><a href="'+e+'" target="_blank" class="btn-circle blocked-link" data-title="'+t+'">開始閱讀</a><p class="message">關閉瀏覽器的「阻擋彈出視窗」功能，下次就可以直接開啟囉！</p></div>'),dataLayer.push({event:"阻擋視窗",category:"開始閱讀",action:"阻擋視窗",label:t})},onReadFromBlock:function(){$(document).one("click",".blocked-link",function(){var e=$(this).attr("data-title");dataLayer.push({event:"從阻擋視窗開啟",category:"開始閱讀",action:"從阻擋視窗開啟",label:e}),$.alertModal.hide()})},init:function(){this.onReadFromBlock()}};t.exports=a},{}],24:[function(e,t,n){var a=e("hbsfy/runtime");t.exports=a.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,r){var o;return'<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>\n            <h4 class="modal-title">劃線註記</h4>\n        </div>\n        <div class="modal-body">\n            <p><a href="" class="upload-text">分享這本書的精彩內容：</a></p>\n            <div class="text-quote">\n            <textarea class="form-control quote_content" rows="5"></textarea>\n            </div>\n            <hr>\n            <p><a href="" class="upload-image">或上傳圖片：</a></p>\n            <div class="image-quote">\n                <input type="file" class="form-control img_quote" id="img_quote" name="img_quote" accept="image/*">\n            </div>\n        </div>\n        <div class="modal-footer"><button class="btn btn-cancel" data-dismiss="modal">取消</button><button class="btn btngreen add_quote" data-mid="'+e.escapeExpression("function"==typeof(o=null!=(o=n.mid||(null!=t?t.mid:t))?o:n.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"mid",hash:{},data:r}):o)+'" data-type="text">新增</button>\n        </div>\n    </div>\n</div>'},useData:!0})},{"hbsfy/runtime":20}],25:[function(e,t,n){$(document).ready(function(){var t=e("./common-modules/page-spinner.js"),n=e("./social/hamburger-menu.js"),a=e("./social/header.js"),r=e("./social/learnmore.js"),o=e("./common-modules/new-quote.js");window.popupBlockerChecker=e("./common-modules/popup-block-checker.js");var i=window.location.pathname;t.init(),n.init(),a.init(),popupBlockerChecker.init();var l=function(){$('[data-toggle="tooltip"]').tooltip()},s=function(){$("img.lazy").lazyload({effect:"fadeIn",threshold:500})};s(),$(document).on("pjax:end",function(){l(),s()}),l();var u;switch("/learnmore"===(u=i)?"learnmore":u.indexOf("/book/")>=0?"book":void 0){case"learnmore":r.init();break;case"book":o.init();break;default:return}})},{"./common-modules/new-quote.js":21,"./common-modules/page-spinner.js":22,"./common-modules/popup-block-checker.js":23,"./social/hamburger-menu.js":26,"./social/header.js":27,"./social/learnmore.js":28}],26:[function(e,t,n){var a={show:!1,$target:$(".wrapper-inner,header, .hamburger-menu"),hideMenu:function(){this.$target.removeClass("slide-right"),$("body").removeClass("fixed")},showMenu:function(){this.$target.addClass("slide-right"),$("body").addClass("fixed")},toggleMenu:function(){this.$target.toggleClass("slide-right"),$("body").toggleClass("fixed")},onResize:function(){window.innerWidth>=768&&this.hideMenu()},init:function(){var e=this,t=_.debounce(e.onResize.bind(this),100);$(".hamburger-button").on("click",function(t){t.stopPropagation(),e.toggleMenu()}),$(document).on("click",".wrapper-inner.slide-right",function(){e.hideMenu()}),$(window).on("resize",function(){t()})}};t.exports=a},{}],27:[function(e,t,n){var a={$header:$(".header"),onResize:function(){var e=$("#header-settingdown");window.innerWidth>=768&&(e.attr("data-toggle","dropdown"),e.parent().removeClass("open"),$("#nav-collapse").removeClass("in"))},init:function(){var e=$("#header-settingdown");$("#nav-collapse").on("show.bs.collapse",function(){e.attr("data-toggle",""),e.parent().addClass("open")}).on("hidden.bs.collapse",function(){e.attr("data-toggle","dropdown"),e.parent().removeClass("open")});var t=_.debounce(this.onResize,100);$(window).on("resize",t)}};t.exports=a},{}],28:[function(e,t,n){var a={rating:function(){var t=$("#rating").html(),n=e("./templates/campaign.hbs")({url:"https://cdn.readmoo.com/campaign/2015/threeuncles/index.html",bookshelf:SOCIAL_URL+"me/bookshelf/total",hotBooks:SOCIAL_URL+"hot-books"}),a=new Date,r=new Date(2015,7,6,0),o=new Date(2015,8,1,0),i=$("#learnmore-modal");i.find(".modal-body").append(t),r<a&&a<o&&i.find(".learnmore-text-container").html(n),i.modal()},init:function(){"#rating"===window.location.hash&&this.rating()}};t.exports=a},{"./templates/campaign.hbs":29}],29:[function(e,t,n){var a=e("hbsfy/runtime");t.exports=a.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,a,r){var o,i=null!=t?t:e.nullContext||{},l=n.helperMissing,s=e.escapeExpression;return'<h3>來幫你的愛書評分吧！</h3>\n<ol>\n  <li>活動期間內（8/6～8/31），幫書籍評分就可以拿獎品喔！</li>\n  <li>要怎麼找到書籍來評分呢？您可以前往「<a href="'+s("function"==typeof(o=null!=(o=n.bookshelf||(null!=t?t.bookshelf:t))?o:l)?o.call(i,{name:"bookshelf",hash:{},data:r}):o)+'" target="_blank">個人書櫃</a>」，或是前往「<a href="'+s("function"==typeof(o=null!=(o=n.hotBooks||(null!=t?t.hotBooks:t))?o:l)?o.call(i,{name:"hotBooks",hash:{},data:r}):o)+'" target="_blank">熱門書籍</a>」，也可以使用搜尋功能來找到想讀的書喔！</li>\n  <li>還有更多玩法，詳情請見<a href="'+s("function"==typeof(o=null!=(o=n.url||(null!=t?t.url:t))?o:l)?o.call(i,{name:"url",hash:{},data:r}):o)+'" target="_blank">活動網頁</a>！</li>\n</ol>\n<a href="'+s("function"==typeof(o=null!=(o=n.bookshelf||(null!=t?t.bookshelf:t))?o:l)?o.call(i,{name:"bookshelf",hash:{},data:r}):o)+'" class="btn btngreen">前往書櫃評分去！</a>'},useData:!0})},{"hbsfy/runtime":20}]},{},[25]);